"use strict";(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[95287],{95287:(t,e,i)=>{i.r(e),i.d(e,{default:()=>g});var r=i(16492),n=i(75015),o=i(7979),s=i(85631),c=i(35999),h=i(70583),d=i(61709),a=i(45935),l=i.n(a),f=i(48483),u=i(50667),m=i(83034),__decorate=function(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let p=class DragDropOpenElement extends s.A{constructor(t,e,i,r,n,o,s){super(t,e,i,r,s),this.i18n=t,this.utils=e,this.bootstrap=i,this.voiceControl=r,this.interaction=n,this.contentService=o,this.alert=s,this.coordinates=[0,0],this.correctIcon=document.createElement("i"),this.correctIcon.classList.add("correct","fas","fa-check"),this.correctIcon.setAttribute("aria-hidden","true"),this.correctIcon.setAttribute("title",this.i18n.value("common.correct")),this.wrongIcon=document.createElement("i"),this.wrongIcon.classList.add("wrong","fas","fa-times"),this.wrongIcon.setAttribute("aria-hidden","true"),this.wrongIcon.setAttribute("title",this.i18n.value("common.incorrect"))}reset(){this.widget.querySelector(".text-result").innerHTML="";const t=this.widget.querySelector("tbody");t.innerHTML="",this.shuffledTerms.forEach(((e,i)=>{t.innerHTML+=l()({term:e.term,definition:e.definition,id:this.widget.id,position:i})}))}feedback(){const t=this.widget.querySelector(".text-result"),e=Array.from(this.widget.querySelectorAll(".drag-source")),i=Array.from(this.widget.querySelectorAll(".drop-choice"));let r=0;i.forEach(((t,i)=>{const n=t.querySelector(".drag-term");if(n){const t=this.shuffledTerms[i].definition,o=n.dataset.position,s=this.shuffledTerms[o].term,c=this.terms.findIndex((t=>t.term===s));n.querySelectorAll("svg").forEach((t=>t.remove())),t===this.terms[c].definition?(n.append(this.correctIcon.cloneNode()),r++):(n.append(this.wrongIcon.cloneNode()),e.find((t=>""===t.innerHTML.trim())).append(n))}})),t.innerHTML=r===i.length?this.i18n.value("common.correct"):this.i18n.value("common.num-correct",{num:r})}check(){this.widget.querySelectorAll(".drag-term svg").forEach((t=>t.remove()));const t=Array.from(this.widget.querySelectorAll(".drop-choice")),e=t.filter(((t,e)=>{const i=t.querySelector(".drag-term");if(!i)return!1;const r=i.dataset.position,n=this.shuffledTerms[r].term,o=this.shuffledTerms[e].definition;return this.terms.find((t=>t.term===n)).definition===o})).length/t.length;this.interaction.emit(new n.sV({id:this.id,type:this.type,description:this.description,score:e})),1===e&&this.interaction.emit(new n.yz({id:this.id,type:this.type,description:this.description})),this.feedback()}async init(){await super.init(),this.terms=await this.contentService.get(this.id);const t=this.terms.map((t=>t.term)),e=this.terms.map((t=>t.definition));this.utils.shuffle(t),this.utils.shuffle(e),this.shuffledTerms=t.map(((t,i)=>({term:t,definition:e[i]})));const i=this.widget.querySelector("tbody");this.shuffledTerms.forEach(((t,e)=>{i.innerHTML+=l()({term:t.term,definition:t.definition,id:this.widget.id,position:e})})),this.rows=Array.from(i.querySelectorAll("tr")),console.debug("[DragDrop] Initialized")}};p=__decorate([(0,r.x)({selector:".widget-drag-drop"}),__metadata("design:paramtypes",[m.A,h.A,o.A,d.A,c.A,f.A,u.A])],p);const g=p},48483:(t,e,i)=>{i.d(e,{A:()=>s});var r=i(65360),n=i(70583),__decorate=function(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let o=class ContentService{constructor(t){this.utils=t,this.loading=!1}async get(t){for(;this.loading;)await this.utils.sleep(100);if(this.content||(this.loading=!0,this.content=await fetch("./content.json").then((t=>t.json())),this.loading=!1),!this.content[t])throw new Error(`Widget ${t} not found`);return JSON.parse(this.utils.b64DecodeUnicode(this.content[t]))}};o=__decorate([(0,r.k)({global:!0}),__metadata("design:paramtypes",[n.A])],o);const s=o}}]);