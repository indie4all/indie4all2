"use strict";(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[8255],{16122:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var s=i(16492),n=i(75015),r=i(35999),c=i(57835),o=i(5513),a=i.n(o);class SentenceOrderItemOpenElement extends c.A{constructor(e,t,i){super(e,t),this.i18n=e,this.utils=t,this.data=i}feedback(e){const t=this.sentence.querySelector(".answer-status");t.setAttribute("aria-label",this.i18n.value(e?"common.correct":"common.incorrect")),t.innerHTML=`\n        <i class="icon ${e?"text-success fas fa-check":"text-danger fas fa-times"}" aria-hidden="true" \n          title="${this.i18n.value(e?"common.correct":"common.incorrect")}"></i>`}init(e){super.init(e),this.utils.shuffle(this.data.words);const t=this.sentence.querySelector(".source-words"),i=this.data.words.map(((e,t)=>a()({id:this.id,pos:t,word:e})));t.querySelectorAll("td").forEach(((e,t)=>e.innerHTML=i[t]))}check(){this.feedback(1===this.score)}reset(){this.coordinates=[0,0],this.sentence.querySelectorAll(".answer-status").forEach((e=>{e.setAttribute("aria-label",""),e.textContent=""})),this.sentence.querySelectorAll(".drag-word-item").forEach((e=>{e.setAttribute("tabindex",""===e.textContent?"-1":""),e.classList.remove("focused")}));const e=Array.from(this.sentence.querySelectorAll(".word-item"));e.forEach(((e,t)=>e.setAttribute("tabindex",0===t?"0":"-1"))),this.sentence.querySelectorAll(".source-words").forEach((t=>{t.querySelectorAll("td").forEach(((t,i)=>t.append(e[i])))}))}get score(){const e=Array.from(this.sentence.querySelectorAll(".target-words .word-item")).map((e=>this.data.words[e.dataset.position]));return this.data.solutions.some((t=>t.split(/\s+/).every(((t,i)=>t===e[i]))))?1:0}}var l=i(28147),h=i(70583),d=i(61709),u=i(48483),f=i(50667),p=i(83034),__decorate=function(e,t,i,s){var n,r=arguments.length,c=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(c=(r<3?n(c):r>3?n(t,i,c):n(t,i))||c);return r>3&&c&&Object.defineProperty(t,i,c),c},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let m=class SentenceOrderOpenElement extends l.A{constructor(e,t,i,s,n,r){super(s,t,e,r),this.i18n=e,this.utils=t,this.interaction=i,this.voiceControl=s,this.contentService=n,this.alert=r}feedback(e){this.widget.querySelector(".text-result").innerHTML=this.i18n.value("common.num-correct",{num:e})}async init(){await super.init(),this.solutions=await this.contentService.get(this.id),this.sentences=Array.from(this.widget.querySelectorAll(".widget-sentence-order-item")).map(((e,t)=>{const i=new SentenceOrderItemOpenElement(this.i18n,this.utils,this.solutions[t]);return i.init(e),i})),console.debug("[SentenceOrder] Initialized")}check(){this.sentences.forEach((e=>e.check()));const e=this.sentences.map((e=>e.score)),t=e.reduce(((e,t)=>e+t),0),i=t/e.length;this.interaction.emit(new n.sV({id:this.id,type:this.type,description:this.description,score:i})),1===i&&this.interaction.emit(new n.yz({id:this.id,type:this.type,description:this.description})),this.feedback(t)}reset(){this.interaction.emit(new n.nz({id:this.id,type:this.type,description:this.description})),this.sentences.forEach((e=>e.reset())),this.widget.querySelector(".text-result").innerHTML=""}};m=__decorate([(0,s.x)({selector:".widget-sentence-order"}),__metadata("design:paramtypes",[p.A,h.A,r.A,d.A,u.A,f.A])],m);const y=m},48483:(e,t,i)=>{i.d(t,{A:()=>c});var s=i(65360),n=i(70583),__decorate=function(e,t,i,s){var n,r=arguments.length,c=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(c=(r<3?n(c):r>3?n(t,i,c):n(t,i))||c);return r>3&&c&&Object.defineProperty(t,i,c),c},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let r=class ContentService{constructor(e){this.utils=e,this.loading=!1}async get(e){for(;this.loading;)await this.utils.sleep(100);if(this.content||(this.loading=!0,this.content=await fetch("./content.json").then((e=>e.json())),this.loading=!1),!this.content[e])throw new Error(`Widget ${e} not found`);return JSON.parse(this.utils.b64DecodeUnicode(this.content[e]))}};r=__decorate([(0,s.k)({global:!0}),__metadata("design:paramtypes",[n.A])],r);const c=r}}]);