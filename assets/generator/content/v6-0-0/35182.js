"use strict";(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[35182],{34927:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var r=i(16492),s=i(75015),n=i(35999),c=i(28147),o=i(70583),a=i(61709),l=i(57835),d=i(5513),u=i.n(d);class SentenceOrderItemEvaluationElement extends l.A{constructor(e,t,i){super(e,t),this.i18n=e,this.utils=t,this.data=i}init(e){super.init(e);const t=this.sentence.querySelector(".source-words"),i=this.data.map(((e,t)=>u()({id:this.id,pos:t,word:e})));t.querySelectorAll("td").forEach(((e,t)=>e.innerHTML=i[t]))}check(){}reset(){this.coordinates=[0,0],this.sentence.querySelectorAll(".drag-word-item").forEach((e=>{e.setAttribute("tabindex",""===e.textContent?"-1":""),e.classList.remove("focused")}));const e=Array.from(this.sentence.querySelectorAll(".word-item"));e.forEach(((e,t)=>e.setAttribute("tabindex",0===t?"0":"-1"))),this.sentence.querySelectorAll(".source-words").forEach((t=>{t.querySelectorAll("td").forEach(((t,i)=>t.append(e[i])))}))}get answer(){return Array.from(this.sentence.querySelectorAll(".target-words .word-item")).map((e=>this.data[e.dataset.position]))}}var h=i(38610),f=i(16126),p=i(50667),w=i(83034),__decorate=function(e,t,i,r){var s,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(c=(n<3?s(c):n>3?s(t,i,c):s(t,i))||c);return n>3&&c&&Object.defineProperty(t,i,c),c},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let y=class SentenceOrderGamificationElement extends c.A{constructor(e,t,i,r,s,n){super(i,t,e,n),this.i18n=e,this.utils=t,this.voiceControl=i,this.interaction=r,this.evaluation=s,this.alert=n}async init(){await super.init(),this.evaluation.attempts.pipe((0,f.p)((e=>e.widgetId===this.id))).subscribe({next:e=>{this.widget.querySelector(".btn-check-answer").disabled=!0,this.widget.querySelector(".text-result").innerHTML=this.i18n.value("common.sent")}}),this.evaluation.get(this.id).subscribe({next:e=>{this.sentences=Array.from(this.widget.querySelectorAll(".widget-sentence-order-item")).map(((t,i)=>{const r=new SentenceOrderItemEvaluationElement(this.i18n,this.utils,e[i]);return r.init(t),r}))},error:e=>{this.widget.querySelector(".text-result").innerHTML=this.i18n.value("evaluation.no-data")}}),console.debug("[SentenceOrder] Initialized")}check(){const e=this.sentences.map((e=>e.answer));this.evaluation.check(this.id,e).subscribe({next:e=>{this.interaction.emit(new s.yz({id:this.id,type:this.type,description:this.description}));this.widget.querySelector(".btn-check-answer").disabled=!0,this.widget.querySelector(".text-result").innerHTML=this.i18n.value("common.sent")},error:e=>{this.widget.querySelector(".text-result").innerHTML=this.i18n.value("evaluation.no-answer")}})}reset(){this.sentences.forEach((e=>e.reset()))}};y=__decorate([(0,r.x)({selector:".widget-sentence-order"}),__metadata("design:paramtypes",[w.A,o.A,a.A,n.A,h.A,p.A])],y);const m=y}}]);