(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[9070],{28616:(t,e,n)=>{var i=n(93633);function __default(t){return t&&(t.__esModule?t.default:t)}t.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,o,a){var s=null!=e?e:t.nullContext||{},r=t.escapeExpression;return'<div class="gamification-participants">\r\n  <div id="student-count" class="student-circle">0</div>\r\n  <button type="button" id="student-list-button" aria-label="'+r(__default(n(61867)).call(s,"gamification-display-student-list",{name:"translate",hash:{},data:a,loc:{start:{line:3,column:61},end:{line:3,column:110}}}))+'"\r\n    class="btn btn-dark rounded-0 text-white pr-3 pl-3" data-bs-toggle="popover" data-trigger="focus"\r\n    data-placement="left">\r\n    <i class="fas fa-user fa-3x" aria-hidden="true"></i>\r\n  </button>\r\n</div>\r\n<div class="gamification-close">\r\n  <button type="button" aria-label="'+r(__default(n(61867)).call(s,"gamification-finish",{name:"translate",hash:{},data:a,loc:{start:{line:10,column:36},end:{line:10,column:71}}}))+'" data-bs-toggle="modal" data-bs-target="#modalConfirmacion"\r\n    class="btn btn-dark rounded-0 text-white pr-3 pl-3 pb-2 pt-2">\r\n    <i class="fas fa-trophy fa-2x fa-fw" aria-hidden="true"></i>\r\n  </button>\r\n</div>\r\n<div class="gamification-step d-none">\r\n  <button type="button" aria-label="'+r(__default(n(61867)).call(s,"gamification-next",{name:"translate",hash:{},data:a,loc:{start:{line:16,column:36},end:{line:16,column:69}}}))+'" data-bs-toggle="modal" data-bs-target="#modalStep"\r\n    class="btn btn-dark rounded-0 text-white pr-3 pl-3 pb-2 pt-2">\r\n    <i class="fas fa-arrow-right fa-2x fa-fw" aria-hidden="true"></i>\r\n  </button>\r\n</div>'},useData:!0})},89546:(t,e,n)=>{var i=n(93633);t.exports=(i.default||i).template({1:function(t,e,n,i,o,a){var s,r=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'    <div class="list-group-item list-group-item-action py-3 lh-tight">\r\n      <strong class="mb-1">'+t.escapeExpression(t.lambda(null!=(s=a[0][0])?r(s,"name"):s,e))+"</strong>\r\n"+(null!=(s=r(n,"if").call(null!=e?e:t.nullContext||{},null!=(s=a[0][0])?r(s,"answered"):s,{name:"if",hash:{},fn:t.program(2,o,0,a),inverse:t.noop,data:o,blockParams:a,loc:{start:{line:5,column:6},end:{line:7,column:13}}}))?s:"")+"    </div>\r\n"},2:function(t,e,i,o,a){return'        <i class="fas fa-check-circle fa-fw text-success ms-1" aria-label="'+t.escapeExpression(function __default(t){return t&&(t.__esModule?t.default:t)}(n(61867)).call(null!=e?e:t.nullContext||{},"gamification-answered",{name:"translate",hash:{},data:a,loc:{start:{line:6,column:75},end:{line:6,column:112}}}))+'"></i>\r\n'},compiler:[8,">= 4.3.0"],main:function(t,e,n,i,o,a){var s,r=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div id="student-list" class="list-group list-group-flush border-bottom scrollarea">\r\n'+(null!=(s=r(n,"each").call(null!=e?e:t.nullContext||{},null!=e?r(e,"students"):e,{name:"each",hash:{},fn:t.program(1,o,1,a),inverse:t.noop,data:o,blockParams:a,loc:{start:{line:2,column:2},end:{line:9,column:11}}}))?s:"")+"</div>"},useData:!0,useBlockParams:!0})},65579:(t,e,n)=>{"use strict";n.d(e,{A:()=>ContainerTestElement});var i=n(46894),o=n(19412),__awaiter=function(t,e,n,i){return new(n||(n=Promise))((function(o,a){function fulfilled(t){try{step(i.next(t))}catch(t){a(t)}}function rejected(t){try{step(i.throw(t))}catch(t){a(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(fulfilled,rejected)}step((i=i.apply(t,e||[])).next())}))};class ContainerTestElement extends((0,i.A)(o.A)){constructor(t,e,n,i){super(e,n,t),this.i18n=t,this.voiceControl=e,this.utils=n,this.interaction=i,this.currentQuestion=0}init(){const t=Object.create(null,{init:{get:()=>super.init}});return __awaiter(this,void 0,void 0,(function*(){yield t.init.call(this),this.startButton=this.widget.querySelector(".container-test-btn"),this.questionProgress=this.widget.querySelector(".container-test-current-question"),this.elementsToHideWhenQuestion=Array.from(this.widget.querySelectorAll(".container-test-start,.container-test-heading")),this.questions=Array.from(this.widget.querySelectorAll(".container-test-question"))}))}begin(){this.elementsToHideWhenQuestion.forEach((t=>t.classList.add("d-none"))),this.questionProgress.classList.add("show"),this.questionProgress.textContent=this.i18n.value("container-test-current-question",{current:1,total:this.questions.length}),this.questions[0].classList.add("show"),this.questions[0].focus()}check(){}voiceControlRepeat(){this.voiceControlMessageElem.innerHTML+=this.utils.alert("alert-info",this.i18n.value("tta-info-containertest"))}voiceControlSelect(){if(this.startButton.click(),this.currentQuestion>=this.questions.length)return;const t=this.children.find((t=>this.questions[this.currentQuestion].contains(t.widget)));this.voiceControl.addTarget(t.id)}voiceControlReset(){this.reset()}}},57952:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>q});var i=n(65360),o=n(7979),a=n(24971),s=n(65579),r=n(40561),l=n(97523),c=n(52176),u=n(44295),d=n(35999),h=n(89953),f=n(70583),m=n(61709),p=n(28616),g=n.n(p),b=n(89546),v=n.n(b),y=n(36097),w=n.n(y),x=n(37607),__decorate=function(t,e,n,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,n,s):o(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter=function(t,e,n,i){return new(n||(n=Promise))((function(o,a){function fulfilled(t){try{step(i.next(t))}catch(t){a(t)}}function rejected(t){try{step(i.throw(t))}catch(t){a(t)}}function step(t){t.done?o(t.value):function adopt(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(fulfilled,rejected)}step((i=i.apply(t,e||[])).next())}))};let C=class GamificationTeacherUnit extends c.A{constructor(t,e,n,i,o,a,s,r,l,c){super(t,e,n,i,o,a,s,r,l),this.factory=t,this.menu=e,this.voiceControl=n,this.bootstrap=i,this.utils=o,this.i18n=a,this.code=s,this.gamification=r,this.mathjax=l,this.interaction=c}showScore(t){var e;t.forEach((t=>{t.points=Math.round(1e3*t.points),t.total=Math.round(1e3*t.total)}));const n=this.modalModule.getOrCreateInstance(this.modal);if(n.hide(),this.modal.classList.add("changing"),null===(e=this.modal.querySelector(".gamification-ranking"))||void 0===e||e.remove(),this.modal.querySelector(".modal-title").innerHTML=this.i18n.value("gamification-ranking"),t.length){t.sort(((t,e)=>e.total-t.total));const e=w()({students:t,me:this.gamification.user});this.modal.querySelector(".modal-body").innerHTML+=e}setTimeout((()=>n.show()),500),setTimeout((()=>this.modal.classList.remove("changing")),1e3)}buildMenu(){const t=g()({code:this.gamification.code});document.getElementById("student-list-div").innerHTML=t;const e=document.getElementById("student-list-button");this.popoverModule.getOrCreateInstance(e,{content:()=>{const t=this.gamification.students;return t.sort(((t,e)=>t.name.localeCompare(e.name))),v()({students:t})},html:!0,trigger:"focus"});const n=document.getElementById("student-count");n.innerHTML=this.gamification.students.length.toString(),this.gamification.studentsChanged.subscribe((t=>n.innerHTML=t.length.toString()));const i=document.getElementById("modalConfirmacion");if(this.modalFinish=this.modalModule.getOrCreateInstance(i),i.querySelector(".btn-confirm").addEventListener("click",(()=>{this.gamification.emit("finish"),window.location.replace(`/ranking/?cod=${this.gamification.code}`)})),this.activity instanceof s.A){const t=document.querySelector(".gamification-step");t.classList.remove("d-none");const e=this.activity.children,n=document.getElementById("modalStep");this.modalStep=this.modalModule.getOrCreateInstance(n),n.querySelector(".btn-confirm").addEventListener("click",(()=>{this.gamification.emit("next"),this.modalStep.hide(),this.showScore(this.gamification.finalScores),t.classList.toggle("d-none",this.gamification.step>=e.length-1)}))}}init(){const t=Object.create(null,{init:{get:()=>super.init}});return __awaiter(this,void 0,void 0,(function*(){yield t.init.call(this),this.popoverModule=yield this.bootstrap.loadPopoverModule(),document.getElementById("showcodgane").innerHTML+=`https://game.upct.es/${this.gamification.code}/`,yield this.gamification.init(),this.gamification.join(),this.buildMenu()}))}};C=__decorate([(0,i.k)(),__metadata("design:paramtypes",[r.default,h.A,m.A,o.A,f.A,u.A,a.A,l.default,x.A,d.A])],C);const q=C}}]);