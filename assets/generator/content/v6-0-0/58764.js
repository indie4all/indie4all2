(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[58764],{5513:(t,e,o)=>{var n=o(93633);function __default(t){return t&&(t.__esModule?t.default:t)}t.exports=(n.default||n).template({1:function(t,e,o,n,i){return"0"},3:function(t,e,o,n,i){return"-1"},compiler:[8,">= 4.3.0"],main:function(t,e,n,i,s){var r,c,l=null!=e?e:t.nullContext||{},a=t.hooks.helperMissing,d="function",h=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<button class="word-item btn btn-primary" id="word-item-'+h(typeof(c=null!=(c=u(n,"id")||(null!=e?u(e,"id"):e))?c:a)===d?c.call(l,{name:"id",hash:{},data:s,loc:{start:{line:1,column:56},end:{line:1,column:62}}}):c)+"-"+h(typeof(c=null!=(c=u(n,"pos")||(null!=e?u(e,"pos"):e))?c:a)===d?c.call(l,{name:"pos",hash:{},data:s,loc:{start:{line:1,column:63},end:{line:1,column:70}}}):c)+'"\r\n draggable="true" aria-grabbed="false" aria-labelledby="word-item-content-'+h(typeof(c=null!=(c=u(n,"id")||(null!=e?u(e,"id"):e))?c:a)===d?c.call(l,{name:"id",hash:{},data:s,loc:{start:{line:2,column:74},end:{line:2,column:80}}}):c)+"-"+h(typeof(c=null!=(c=u(n,"pos")||(null!=e?u(e,"pos"):e))?c:a)===d?c.call(l,{name:"pos",hash:{},data:s,loc:{start:{line:2,column:81},end:{line:2,column:88}}}):c)+" word-item-status-"+h(typeof(c=null!=(c=u(n,"id")||(null!=e?u(e,"id"):e))?c:a)===d?c.call(l,{name:"id",hash:{},data:s,loc:{start:{line:2,column:106},end:{line:2,column:112}}}):c)+"-"+h(typeof(c=null!=(c=u(n,"pos")||(null!=e?u(e,"pos"):e))?c:a)===d?c.call(l,{name:"pos",hash:{},data:s,loc:{start:{line:2,column:113},end:{line:2,column:120}}}):c)+'"\r\n data-position="'+h(typeof(c=null!=(c=u(n,"pos")||(null!=e?u(e,"pos"):e))?c:a)===d?c.call(l,{name:"pos",hash:{},data:s,loc:{start:{line:3,column:16},end:{line:3,column:23}}}):c)+'" tabindex="'+(null!=(r=__default(o(6088)).call(l,null!=e?u(e,"pos"):e,0,{name:"ifeq",hash:{},fn:t.program(1,s,0),inverse:t.noop,data:s,loc:{start:{line:3,column:35},end:{line:3,column:60}}}))?r:"")+(null!=(r=__default(o(20884)).call(l,null!=e?u(e,"pos"):e,0,{name:"ifneq",hash:{},fn:t.program(3,s,0),inverse:t.noop,data:s,loc:{start:{line:3,column:60},end:{line:3,column:88}}}))?r:"")+'"> \r\n  <span id="word-item-status-'+h(typeof(c=null!=(c=u(n,"id")||(null!=e?u(e,"id"):e))?c:a)===d?c.call(l,{name:"id",hash:{},data:s,loc:{start:{line:4,column:29},end:{line:4,column:35}}}):c)+"-"+h(typeof(c=null!=(c=u(n,"pos")||(null!=e?u(e,"pos"):e))?c:a)===d?c.call(l,{name:"pos",hash:{},data:s,loc:{start:{line:4,column:36},end:{line:4,column:43}}}):c)+'" class="status visually-hidden"></span>\r\n  <span id="word-item-content-'+h(typeof(c=null!=(c=u(n,"id")||(null!=e?u(e,"id"):e))?c:a)===d?c.call(l,{name:"id",hash:{},data:s,loc:{start:{line:5,column:30},end:{line:5,column:36}}}):c)+"-"+h(typeof(c=null!=(c=u(n,"pos")||(null!=e?u(e,"pos"):e))?c:a)===d?c.call(l,{name:"pos",hash:{},data:s,loc:{start:{line:5,column:37},end:{line:5,column:44}}}):c)+'">'+h(typeof(c=null!=(c=u(n,"word")||(null!=e?u(e,"word"):e))?c:a)===d?c.call(l,{name:"word",hash:{},data:s,loc:{start:{line:5,column:46},end:{line:5,column:54}}}):c)+"</span>\r\n</button>"},useData:!0})},16492:(t,e,o)=>{"use strict";o.d(e,{x:()=>Widget});var n=o(7181),i=o(40561);function Widget(t){const e=n.Ay.get(i.default);return function(o){console.debug("Registering widget "+o.name+" for selector "+t.selector),e.registerWidget(t.selector,o)}}},19412:(t,e,o)=>{"use strict";o.d(e,{A:()=>Element});var n=o(16126),i=o(3605);class Element{constructor(t,e,o,n){this.voiceControl=t,this.utils=e,this.i18n=o,this.alert=n,this._activityNumber=0,this._preload=!1}async init(){if(!this._widget)throw new Error("ElementHTML widget has not been set.");this.voiceControlButton&&(this.voiceControlButton.addEventListener("click",(()=>{if(this.voiceControl.currentTarget!==this.id){for(;this.voiceControl.numTargets>1;)this.voiceControl.popTarget();return this._parent&&this.voiceControl.addTarget(this._parent.id),void this.voiceControl.addTarget(this.id)}this.voiceControl.popTarget(),this.voiceControlButton&&this.toggleVoiceControlButton(!1)})),this.voiceControl.voiceControlTargetChanged.subscribe((t=>{this.id===t.old&&this.toggleVoiceControlButton(!1),this.id===t.new&&this.toggleVoiceControlButton(!0)})),this.voiceControl.voiceControlActions.pipe((0,n.p)((t=>t.target===this.id))).subscribe((t=>{console.debug(`[Element] Element with ${this.id} received voice action:`,t),t instanceof i.m6?this.voiceControlStart():t instanceof i.$q?this.voiceControlFinish():t instanceof i.DZ?this.voiceControlNext():t instanceof i.vZ?this.voiceControlPrevious():t instanceof i.Fd?this.voiceControlGoto(t.position):t instanceof i.V3?this.voiceControlBack():t instanceof i.gZ?this.voiceControlSelect():t instanceof i.CG?this.voiceControlClose():t instanceof i.sT?this.voiceControlCheck():t instanceof i.XR?this.voiceControlCurrent():t instanceof i.B$?this.voiceControlDelete():t instanceof i._R?this.voiceControlMaximize():t instanceof i.EZ?this.voiceControlMinimize():t instanceof i.$V?this.voiceControlMove(t.position):t instanceof i.ow?this.voiceControlPause():t instanceof i.OR?this.voiceControlPlay():t instanceof i.pr?this.voiceControlRepeat():t instanceof i.lR?this.voiceControlReset():t instanceof i.m6?this.voiceControlStart():t instanceof i.o3?this.voiceControlStop():t instanceof i.HU?this.voiceControlWrite(t.text):t instanceof i.kw&&this.voiceControlUnknown()})))}get description(){return this.widget.dataset.desc||""}get id(){return this.widget.id}get type(){return this.widget.dataset.type||""}get widget(){return this._widget}set widget(t){this._widget=t}get parent(){return this._parent}set parent(t){this._parent=t}get preload(){return this._preload}get voiceControlButton(){return this._voiceControlButton||(this._voiceControlButton=document.querySelector(`#speech-to-action-${this.id}`)),this._voiceControlButton}set activityNumber(t){this._activityNumber=t,this.voiceControlButton&&(this.voiceControlButton.innerHTML+=`<span class="element-number">${this.i18n.value("activity-number",{num:t})}</span>`)}toggleHighlight(t){this.widget.classList.toggle("speech-focused",t)}toggleVoiceControlButton(t){if(this.voiceControlButton){const e=this.voiceControlButton.querySelector("svg");e&&(e.classList.toggle("fa-head-side-cough",t),e.classList.toggle("fa-head-side-cough-slash",!t))}}showVoiceControlButton(){this.voiceControlButton&&this.voiceControlButton.classList.add("show")}hideVoiceControlButton(){this.voiceControlButton&&this.voiceControlButton.classList.remove("show")}voiceControlStart(){this.toggleVoiceControlButton(!0)}voiceControlFinish(){this.voiceControl.popTarget(),this.toggleVoiceControlButton(!1)}voiceControlClose(){this.voiceControlUnknown()}voiceControlCheck(){this.voiceControlUnknown()}voiceControlCurrent(){this.voiceControlUnknown()}voiceControlDelete(){this.voiceControlUnknown()}voiceControlMaximize(){this.voiceControlUnknown()}voiceControlMinimize(){this.voiceControlUnknown()}voiceControlMove(t){this.voiceControlUnknown()}voiceControlPause(){this.voiceControlUnknown()}voiceControlPlay(){this.voiceControlUnknown()}voiceControlRepeat(){this.voiceControlUnknown()}voiceControlReset(){this.voiceControlUnknown()}voiceControlStop(){this.voiceControlUnknown()}voiceControlWrite(t){this.voiceControlUnknown()}voiceControlNext(){this.voiceControlUnknown()}voiceControlPrevious(){this.voiceControlUnknown()}voiceControlGoto(t){this.voiceControlUnknown()}voiceControlBack(){this.voiceControlUnknown()}voiceControlSelect(){this.voiceControlUnknown()}voiceControlUnknown(){this.alert.danger(this.i18n.vc.value("message.error"))}}},57835:(t,e,o)=>{"use strict";var n;o.d(e,{A:()=>SentenceOrderItemElement}),function(t){t.ARROW_LEFT="ArrowLeft",t.ARROW_UP="ArrowUp",t.ARROW_RIGHT="ArrowRight",t.ARROW_DOWN="ArrowDown",t.END="End",t.ENTER="Enter",t.ESCAPE="Escape",t.HOME="Home",t.SPACE="Space"}(n||(n={}));class SentenceOrderItemElement{constructor(t,e){this.i18n=t,this.utils=e}disableFocus(){this.sentence.querySelectorAll("td").forEach((t=>{var e;t.classList.remove("focused"),""===t.textContent?t.setAttribute("tabindex","-1"):(t.setAttribute("tabindex",""),null===(e=t.querySelector(".word-item"))||void 0===e||e.setAttribute("tabindex","-1"))}))}focusCell(t){if(this.disableFocus(),t.classList.add("focused"),""===t.innerHTML)t.setAttribute("tabindex","0"),t.focus();else{const e=t.querySelector(".word-item");e.setAttribute("tabindex","0"),e.focus()}}dragItem(t){this.sentence.querySelectorAll(".word-list").forEach((t=>t.setAttribute("aria-dropeffect","move"))),this.grabbed&&(this.grabbed.querySelector(".status").textContent="",this.grabbed.classList.remove("selected"),this.grabbed.setAttribute("aria-grabbed","false")),this.grabbed=t,this.grabbed.classList.add("selected"),this.grabbed.querySelector(".status").textContent=this.i18n.value("common.selected"),this.grabbed.setAttribute("aria-grabbed","true"),t.closest(".drag-word-item").setAttribute("tabindex","-1")}dropItem(t){if(this.grabbed){""===t.innerHTML&&(this.disableFocus(),t.setAttribute("tabindex",""),t.classList.add("focused"),t.append(this.grabbed)),this.grabbed.setAttribute("aria-grabbed","false"),this.grabbed.setAttribute("tabindex","0");this.grabbed.querySelector(".status").textContent="",this.grabbed.classList.remove("selected"),this.grabbed.focus(),this.grabbed=null,this.sentence.querySelectorAll(".word-list").forEach((t=>t.setAttribute("aria-dropeffect",""))),this.sentence.querySelectorAll(".answer-status").forEach((t=>{t.setAttribute("aria-label",""),t.innerHTML=""}))}}onKeyDown(t){if(t.code===n.ARROW_LEFT||t.code===n.ARROW_UP||t.code===n.ARROW_RIGHT||t.code===n.ARROW_DOWN||t.code===n.HOME||t.code===n.END||t.code===n.SPACE||t.code===n.ENTER||t.code===n.ESCAPE)if(t.preventDefault(),t.code===n.SPACE||t.code===n.ENTER){const t=this.rows[this.coordinates[0]].querySelectorAll("td")[this.coordinates[1]];if(""===t.innerHTML)this.dropItem(t);else{const e=t.querySelector(".word-item");e&&this.dragItem(e)}}else if(t.code===n.ESCAPE){const t=this.rows[this.coordinates[0]].querySelectorAll("td")[this.coordinates[1]];""===t.innerHTML?t.blur():t.querySelector(".word-item").blur()}else t.code!==n.ARROW_LEFT&&t.code!==n.ARROW_UP&&t.code!==n.ARROW_RIGHT&&t.code!==n.ARROW_DOWN&&t.code!==n.HOME&&t.code!==n.END||(t.code===n.ARROW_LEFT&&this.coordinates[1]>0&&(this.coordinates[1]-=1),t.code===n.ARROW_UP&&this.coordinates[0]>0&&(this.coordinates[0]-=1),t.code===n.ARROW_RIGHT&&this.coordinates[1]<this.rows[0].querySelectorAll("td").length-1&&(this.coordinates[1]+=1),t.code===n.ARROW_DOWN&&this.coordinates[0]<this.rows.length-1&&(this.coordinates[0]+=1),t.code===n.HOME&&(t.ctrlKey&&(this.coordinates[0]=0),this.coordinates[1]=0),t.code===n.END&&(t.ctrlKey&&(this.coordinates[0]=this.rows.length-1),this.coordinates[1]=this.rows[0].querySelectorAll("td").length-1),this.focusCell(this.rows[this.coordinates[0]].querySelectorAll("td")[this.coordinates[1]]))}init(t){this.sentence=t,this.id=this.sentence.id,this.coordinates=[0,0],this.rows=Array.from(this.sentence.querySelectorAll("tr")),this.sentence.addEventListener("dragstart",(t=>{var e;t.target instanceof HTMLElement&&t.target.classList.contains("word-item")&&(t.stopPropagation(),null===(e=t.dataTransfer)||void 0===e||e.setData("text/plain",t.target.id),this.dragItem(t.target))})),this.sentence.addEventListener("dragover",(t=>{t.target instanceof HTMLElement&&t.target.classList.contains("drag-word-item")&&""===t.target.innerHTML&&t.preventDefault()})),this.sentence.addEventListener("drop",(t=>{var e;t.target instanceof HTMLElement&&t.target.classList.contains("drag-word-item")&&(this.grabbed=this.sentence.querySelector(`#${null===(e=t.dataTransfer)||void 0===e?void 0:e.getData("text/plain")}`),this.dropItem(t.target))})),this.sentence.addEventListener("keydown",(t=>{this.onKeyDown(t)})),this.sentence.addEventListener("click",(t=>{t.target instanceof HTMLElement&&t.target.classList.contains("word-item")?this.dragItem(t.target):t.target instanceof HTMLElement&&t.target.classList.contains("drag-word-item")&&this.dropItem(t.target)}))}focusFirst(){this.coordinates=[0,0],this.focusCell(this.rows[0].querySelectorAll("td")[0])}voiceControlNext(){this.coordinates[1]===this.rows[0].querySelectorAll("td").length-1?(this.coordinates[0]=this.utils.mod(this.coordinates[0]+1,this.rows.length),this.coordinates[1]=0):this.coordinates[1]+=1,this.focusCell(this.rows[this.coordinates[0]].querySelectorAll("td")[this.coordinates[1]])}voiceControlPrevious(){0===this.coordinates[1]?(this.coordinates[0]=this.utils.mod(this.coordinates[0]-1,this.rows.length),this.coordinates[1]=this.rows[0].querySelectorAll("td").length-1):this.coordinates[1]-=1,this.focusCell(this.rows[this.coordinates[0]].querySelectorAll("td")[this.coordinates[1]])}voiceControlSelect(){const t=this.rows[this.coordinates[0]].querySelectorAll("td")[this.coordinates[1]];if(""===t.innerHTML)this.dropItem(t);else{const e=t.querySelector(".word-item");e&&this.dragItem(e)}}}},28147:(t,e,o)=>{"use strict";o.d(e,{A:()=>SentenceOrderElement});var n=o(19412);class SentenceOrderElement extends n.A{constructor(){super(...arguments),this.currentSentence=0}async init(){await super.init(),await o.e(21579).then(o.t.bind(o,21579,23)),this.widget.addEventListener("click",(t=>{t.target instanceof HTMLElement&&(t.target.classList.contains("btn-check-answer")&&this.check(),t.target.classList.contains("btn-reset")&&this.reset())}))}voiceControlStart(){super.voiceControlStart(),this.voiceControlGoto(0)}voiceControlCheck(){this.check()}voiceControlGoto(t){this.currentSentence=this.utils.mod(t,this.sentences.length);this.sentences[this.currentSentence].focusFirst()}voiceControlNext(){this.sentences[this.currentSentence].voiceControlNext()}voiceControlPrevious(){this.sentences[this.currentSentence].voiceControlPrevious()}voiceControlRepeat(){this.alert.info(this.i18n.vc.value("info.sentence-order"))}voiceControlReset(){this.reset()}voiceControlSelect(){this.sentences[this.currentSentence].voiceControlSelect()}}},35999:(t,e,o)=>{"use strict";o.d(e,{A:()=>l});var n=o(65360),i=o(27291),s=o(16126),r=o(81160),__decorate=function(t,e,o,n){var i,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(s<3?i(r):s>3?i(e,o,r):i(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let c=class InteractionService{constructor(){this.interactionSubject=new i.B,this.interactions$=this.interactionSubject.asObservable()}getInteractions(t){return this.interactions$.pipe((0,s.p)((e=>e instanceof t)),(0,r.T)((t=>t)))}emit(t){console.debug("Interaction sent",t),this.interactionSubject.next(t)}};c=__decorate([(0,n.k)({global:!0}),__metadata("design:paramtypes",[])],c);const l=c},75015:(t,e,o)=>{"use strict";o.d(e,{HB:()=>VideoReadyInteraction,Hc:()=>VideoEndInteraction,Pm:()=>TabClickedInteraction,SB:()=>VideoPlayingInteraction,Ym:()=>VideoPauseInteraction,fy:()=>AudioPauseInteraction,gY:()=>VideoMaximizedInteraction,nz:()=>ActivityResetInteraction,pK:()=>AudioPlayInteraction,ro:()=>AudioStopInteraction,s9:()=>VideoMinimizedInteraction,sV:()=>ActivityCheckInteraction,uX:()=>VideoPlayInteraction,yz:()=>ActivityFinishedInteraction});class Interaction{constructor(t){this._widgetId=t.id,this._widgetType=t.type,this._widgetDescription=t.description}get id(){return this._widgetId}get type(){return this._widgetType}get description(){return this._widgetDescription}}class ActivityResetInteraction extends Interaction{}class ActivityCheckInteraction extends Interaction{constructor(t){super(t),this._score=t.score}get score(){return this._score}}class ActivityFinishedInteraction extends Interaction{}class TabClickedInteraction extends Interaction{constructor(t){super(t),this._tab=t.tab}get tab(){return this._tab}}class AudioPlayInteraction extends Interaction{}class AudioPauseInteraction extends Interaction{}class AudioStopInteraction extends Interaction{}class VideoInteraction extends Interaction{constructor(t){super(t),this._time=t.time,this._duration=t.duration}get time(){return this._time}get duration(){return this._duration}}class VideoPlayInteraction extends VideoInteraction{}class VideoPlayingInteraction extends VideoInteraction{}class VideoEndInteraction extends VideoInteraction{}class VideoPauseInteraction extends VideoInteraction{}class VideoReadyInteraction extends Interaction{}class VideoMaximizedInteraction extends Interaction{}class VideoMinimizedInteraction extends Interaction{}},6088:(t,e,o)=>{"use strict";function __WEBPACK_DEFAULT_EXPORT__(t,e,o){if(t==e)return o.fn(this)}o.r(e),o.d(e,{default:()=>__WEBPACK_DEFAULT_EXPORT__})},20884:(t,e,o)=>{"use strict";function __WEBPACK_DEFAULT_EXPORT__(t,e,o){if(t!=e)return o.fn(this)}o.r(e),o.d(e,{default:()=>__WEBPACK_DEFAULT_EXPORT__})}}]);