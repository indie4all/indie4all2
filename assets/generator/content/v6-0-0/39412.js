(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[39412],{28616:(t,e,n)=>{var i=n(93633);function __default(t){return t&&(t.__esModule?t.default:t)}t.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,a,s){var o=null!=e?e:t.nullContext||{},r=t.escapeExpression;return'<div class="gamification-participants">\r\n  <div id="student-count" class="student-circle">0</div>\r\n  <button type="button" id="student-list-button" aria-label="'+r(__default(n(61867)).call(o,"gamification.display-student-list",{name:"translate",hash:{},data:s,loc:{start:{line:3,column:61},end:{line:3,column:110}}}))+'"\r\n    class="btn btn-dark rounded-0 text-white pr-3 pl-3" data-bs-toggle="popover" data-trigger="focus"\r\n    data-placement="left">\r\n    <i class="fas fa-user fa-3x" aria-hidden="true"></i>\r\n  </button>\r\n</div>\r\n<div class="gamification-close">\r\n  <button type="button" aria-label="'+r(__default(n(61867)).call(o,"gamification.finish",{name:"translate",hash:{},data:s,loc:{start:{line:10,column:36},end:{line:10,column:71}}}))+'" data-bs-toggle="modal" data-bs-target="#modalConfirmacion"\r\n    class="btn btn-dark rounded-0 text-white pr-3 pl-3 pb-2 pt-2">\r\n    <i class="fas fa-trophy fa-2x fa-fw" aria-hidden="true"></i>\r\n  </button>\r\n</div>\r\n<div class="gamification-step d-none">\r\n  <button type="button" aria-label="'+r(__default(n(61867)).call(o,"gamification.next",{name:"translate",hash:{},data:s,loc:{start:{line:16,column:36},end:{line:16,column:69}}}))+'" data-bs-toggle="modal" data-bs-target="#modalStep"\r\n    class="btn btn-dark rounded-0 text-white pr-3 pl-3 pb-2 pt-2">\r\n    <i class="fas fa-arrow-right fa-2x fa-fw" aria-hidden="true"></i>\r\n  </button>\r\n</div>'},useData:!0})},89546:(t,e,n)=>{var i=n(93633);t.exports=(i.default||i).template({1:function(t,e,n,i,a,s){var o,r=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'    <div class="list-group-item list-group-item-action py-3 lh-tight">\r\n      <strong class="mb-1">'+t.escapeExpression(t.lambda(null!=(o=s[0][0])?r(o,"name"):o,e))+"</strong>\r\n"+(null!=(o=r(n,"if").call(null!=e?e:t.nullContext||{},null!=(o=s[0][0])?r(o,"answered"):o,{name:"if",hash:{},fn:t.program(2,a,0,s),inverse:t.noop,data:a,blockParams:s,loc:{start:{line:5,column:6},end:{line:7,column:13}}}))?o:"")+"    </div>\r\n"},2:function(t,e,i,a,s){return'        <i class="fas fa-check-circle fa-fw text-success ms-1" aria-label="'+t.escapeExpression(function __default(t){return t&&(t.__esModule?t.default:t)}(n(61867)).call(null!=e?e:t.nullContext||{},"gamification.answered",{name:"translate",hash:{},data:s,loc:{start:{line:6,column:75},end:{line:6,column:112}}}))+'"></i>\r\n'},compiler:[8,">= 4.3.0"],main:function(t,e,n,i,a,s){var o,r=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div id="student-list" class="list-group list-group-flush border-bottom scrollarea">\r\n'+(null!=(o=r(n,"each").call(null!=e?e:t.nullContext||{},null!=e?r(e,"students"):e,{name:"each",hash:{},fn:t.program(1,a,1,s),inverse:t.noop,data:a,blockParams:s,loc:{start:{line:2,column:2},end:{line:9,column:11}}}))?o:"")+"</div>"},useData:!0,useBlockParams:!0})},65579:(t,e,n)=>{"use strict";n.d(e,{A:()=>ContainerTestElement});var i=n(46894),a=n(19412);class ContainerTestElement extends((0,i.A)(a.A)){constructor(t,e,n,i,a){super(e,n,t,a),this.i18n=t,this.voiceControl=e,this.utils=n,this.interaction=i,this.alert=a,this.currentQuestion=0}async init(){await super.init(),this.startButton=this.widget.querySelector(".container-test-btn"),this.questionProgress=this.widget.querySelector(".container-test-current-question"),this.elementsToHideWhenQuestion=Array.from(this.widget.querySelectorAll(".container-test-start,.container-test-heading")),this.questions=Array.from(this.widget.querySelectorAll(".container-test-question"))}begin(){this.elementsToHideWhenQuestion.forEach((t=>t.classList.add("d-none"))),this.questionProgress.classList.add("show"),this.questionProgress.textContent=this.i18n.value("container-test.current-question",{current:1,total:this.questions.length}),this.questions[0].classList.add("show"),this.questions[0].focus()}check(){}voiceControlRepeat(){this.alert.info(this.i18n.vc.value("info.containertest"))}voiceControlSelect(){if(this.startButton.click(),this.currentQuestion>=this.questions.length)return;const t=this.children.find((t=>this.questions[this.currentQuestion].contains(t.widget)));this.voiceControl.addTarget(t.id)}voiceControlReset(){this.reset()}}},57952:(t,e,n)=>{"use strict";n.d(e,{default:()=>k});var i=n(65360),a=n(7979),s=n(24971),o=n(65579),r=n(40561),l=n(97523),c=n(52176),u=n(35999),d=n(92652),h=n(70583),m=n(61709),f=n(28616),g=n.n(f),p=n(89546),b=n.n(p),v=n(36097),y=n.n(v),w=n(37607),C=n(50667),q=n(83034),__decorate=function(t,e,n,i){var a,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(s<3?a(o):s>3?a(e,n,o):a(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let x=class GamificationTeacherUnit extends c.A{constructor(t,e,n,i,a,s,o,r,l,c,u){super(t,e,n,i,a,s,o,r,l,u),this.factory=t,this.menu=e,this.voiceControl=n,this.bootstrap=i,this.utils=a,this.i18n=s,this.code=o,this.mathjax=r,this.gamification=l,this.interaction=c,this.alert=u}showScore(t){var e;t.forEach((t=>{t.points=Math.round(1e3*t.points),t.total=Math.round(1e3*t.total)}));const n=this.modalModule.getOrCreateInstance(this.modal);if(n.hide(),this.modal.classList.add("changing"),null===(e=this.modal.querySelector(".gamification-ranking"))||void 0===e||e.remove(),this.modal.querySelector(".modal-title").innerHTML=this.i18n.value("gamification.ranking"),t.length){t.sort(((t,e)=>e.total-t.total));const e=y()({students:t,me:this.gamification.user});this.modal.querySelector(".modal-body").innerHTML+=e}setTimeout((()=>n.show()),500),setTimeout((()=>this.modal.classList.remove("changing")),1e3)}buildMenu(){const t=g()({code:this.gamification.code});document.getElementById("student-list-div").innerHTML=t;const e=document.getElementById("student-list-button");this.popoverModule.getOrCreateInstance(e,{content:()=>{const t=this.gamification.students;return t.sort(((t,e)=>t.name.localeCompare(e.name))),b()({students:t})},html:!0,trigger:"focus"});const n=document.getElementById("student-count");n.innerHTML=this.gamification.students.length.toString(),this.gamification.studentsChanged.subscribe((t=>n.innerHTML=t.length.toString()));const i=document.getElementById("modalConfirmacion");if(this.modalFinish=this.modalModule.getOrCreateInstance(i),i.querySelector(".btn-confirm").addEventListener("click",(()=>{this.gamification.emit("finish"),window.location.replace(`/ranking/?cod=${this.gamification.code}`)})),this.activity instanceof o.A){const t=document.querySelector(".gamification-step");t.classList.remove("d-none");const e=this.activity.children,n=document.getElementById("modalStep");this.modalStep=this.modalModule.getOrCreateInstance(n),n.querySelector(".btn-confirm").addEventListener("click",(()=>{this.gamification.emit("next"),this.modalStep.hide(),this.showScore(this.gamification.finalScores),t.classList.toggle("d-none",this.gamification.step>=e.length-1)}))}}async init(){await super.init(),this.popoverModule=await this.bootstrap.loadPopoverModule(),document.getElementById("showcodgane").innerHTML+=`https://game.upct.es/${this.gamification.code}/`,await this.gamification.init(),this.gamification.join(),this.buildMenu()}};x=__decorate([(0,i.k)(),__metadata("design:paramtypes",[r.default,d.default,m.A,a.A,h.A,q.A,s.A,w.A,l.default,u.A,C.A])],x);const k=x}}]);