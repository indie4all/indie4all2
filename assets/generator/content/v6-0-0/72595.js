"use strict";(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[72595],{16492:(t,o,e)=>{e.d(o,{x:()=>Widget});var i=e(7181),n=e(40561);function Widget(t){const o=i.Ay.get(n.default);return function(e){console.debug("Registering widget "+e.name+" for selector "+t.selector),o.registerWidget(t.selector,e)}}},19412:(t,o,e)=>{e.d(o,{A:()=>Element});var i=e(16126),n=e(3605);class Element{constructor(t,o,e,i){this.voiceControl=t,this.utils=o,this.i18n=e,this.alert=i,this._activityNumber=0,this._preload=!1}async init(){if(!this._widget)throw new Error("ElementHTML widget has not been set.");this.voiceControlButton&&(this.voiceControlButton.addEventListener("click",(()=>{if(this.voiceControl.currentTarget!==this.id){for(;this.voiceControl.numTargets>1;)this.voiceControl.popTarget();return this._parent&&this.voiceControl.addTarget(this._parent.id),void this.voiceControl.addTarget(this.id)}this.voiceControl.popTarget(),this.voiceControlButton&&this.toggleVoiceControlButton(!1)})),this.voiceControl.voiceControlTargetChanged.subscribe((t=>{this.id===t.old&&this.toggleVoiceControlButton(!1),this.id===t.new&&this.toggleVoiceControlButton(!0)})),this.voiceControl.voiceControlActions.pipe((0,i.p)((t=>t.target===this.id))).subscribe((t=>{console.debug(`[Element] Element with ${this.id} received voice action:`,t),t instanceof n.m6?this.voiceControlStart():t instanceof n.$q?this.voiceControlFinish():t instanceof n.DZ?this.voiceControlNext():t instanceof n.vZ?this.voiceControlPrevious():t instanceof n.Fd?this.voiceControlGoto(t.position):t instanceof n.V3?this.voiceControlBack():t instanceof n.gZ?this.voiceControlSelect():t instanceof n.CG?this.voiceControlClose():t instanceof n.sT?this.voiceControlCheck():t instanceof n.XR?this.voiceControlCurrent():t instanceof n.B$?this.voiceControlDelete():t instanceof n._R?this.voiceControlMaximize():t instanceof n.EZ?this.voiceControlMinimize():t instanceof n.$V?this.voiceControlMove(t.position):t instanceof n.ow?this.voiceControlPause():t instanceof n.OR?this.voiceControlPlay():t instanceof n.pr?this.voiceControlRepeat():t instanceof n.lR?this.voiceControlReset():t instanceof n.m6?this.voiceControlStart():t instanceof n.o3?this.voiceControlStop():t instanceof n.HU?this.voiceControlWrite(t.text):t instanceof n.kw&&this.voiceControlUnknown()})))}get description(){return this.widget.dataset.desc||""}get id(){return this.widget.id}get type(){return this.widget.dataset.type||""}get widget(){return this._widget}set widget(t){this._widget=t}get parent(){return this._parent}set parent(t){this._parent=t}get preload(){return this._preload}get voiceControlButton(){return this._voiceControlButton||(this._voiceControlButton=document.querySelector(`#speech-to-action-${this.id}`)),this._voiceControlButton}set activityNumber(t){this._activityNumber=t,this.voiceControlButton&&(this.voiceControlButton.innerHTML+=`<span class="element-number">${this.i18n.value("activity-number",{num:t})}</span>`)}toggleHighlight(t){this.widget.classList.toggle("speech-focused",t)}toggleVoiceControlButton(t){if(this.voiceControlButton){const o=this.voiceControlButton.querySelector("svg");o&&(o.classList.toggle("fa-head-side-cough",t),o.classList.toggle("fa-head-side-cough-slash",!t))}}showVoiceControlButton(){this.voiceControlButton&&this.voiceControlButton.classList.add("show")}hideVoiceControlButton(){this.voiceControlButton&&this.voiceControlButton.classList.remove("show")}voiceControlStart(){this.toggleVoiceControlButton(!0)}voiceControlFinish(){this.voiceControl.popTarget(),this.toggleVoiceControlButton(!1)}voiceControlClose(){this.voiceControlUnknown()}voiceControlCheck(){this.voiceControlUnknown()}voiceControlCurrent(){this.voiceControlUnknown()}voiceControlDelete(){this.voiceControlUnknown()}voiceControlMaximize(){this.voiceControlUnknown()}voiceControlMinimize(){this.voiceControlUnknown()}voiceControlMove(t){this.voiceControlUnknown()}voiceControlPause(){this.voiceControlUnknown()}voiceControlPlay(){this.voiceControlUnknown()}voiceControlRepeat(){this.voiceControlUnknown()}voiceControlReset(){this.voiceControlUnknown()}voiceControlStop(){this.voiceControlUnknown()}voiceControlWrite(t){this.voiceControlUnknown()}voiceControlNext(){this.voiceControlUnknown()}voiceControlPrevious(){this.voiceControlUnknown()}voiceControlGoto(t){this.voiceControlUnknown()}voiceControlBack(){this.voiceControlUnknown()}voiceControlSelect(){this.voiceControlUnknown()}voiceControlUnknown(){this.alert.danger(this.i18n.vc.value("message.error"))}}},72595:(t,o,e)=>{e.r(o),e.d(o,{default:()=>g});var i,n=e(16492),r=e(75015);!function(t){t[t.MODAL=0]="MODAL",t[t.CONTENT=1]="CONTENT"}(i||(i={}));var s=e(7979),c=e(46894),l=e(19412),a=e(35999),h=e(61709),d=e(70583),u=e(50667),v=e(83034),__decorate=function(t,o,e,i){var n,r=arguments.length,s=r<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,e,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(o,e,s):n(o,e))||s);return r>3&&s&&Object.defineProperty(o,e,s),s},__metadata=function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)};let C=class ModalElement extends((0,c.A)(l.A)){constructor(t,o,e,n,r,s){super(e,r,n,s),this.bootstrap=t,this.interaction=o,this.voiceControl=e,this.i18n=n,this.utils=r,this.alert=s,this.mode=i.MODAL,this.currentChild=0}async init(){await super.init(),this.btn=this.widget.querySelector(".btn-modal"),this.modalModule=await this.bootstrap.loadModalModule();document.getElementById("modal"+this.id).addEventListener("shown.bs.modal",(()=>{this.interaction.emit(new r.yz({id:this.id,type:this.type,description:this.description}))})),console.debug("[Modal] Initialized")}voiceControlStart(){super.voiceControlStart(),this.mode=i.MODAL,this.currentChild=0,this.btn.focus()}voiceControlClose(){this.mode=i.MODAL,this.children.forEach((t=>t.toggleHighlight(!1))),this.voiceControl.currentTarget!==this.id&&this.voiceControl.popTarget()}voiceControlFinish(){if(this.mode===i.MODAL){super.voiceControlFinish();const t=document.getElementById("modal"+this.id);this.modalModule.getOrCreateInstance(t).hide()}else this.mode=i.MODAL,this.children.forEach((t=>t.toggleHighlight(!1)))}voiceControlSelect(){if(this.mode===i.MODAL){const t=this.widget.querySelector(".btn-modal");return this.currentChild=0,this.children[this.currentChild].toggleHighlight(!0),this.mode=i.CONTENT,void t.click()}this.voiceControl.addTarget(this.children[this.currentChild].id)}voiceControlRepeat(){this.alert.info(this.i18n.vc.value("info.modal"))}voiceControlGoto(t){this.mode===i.CONTENT?(this.children.forEach((t=>t.toggleHighlight(!1))),this.currentChild=this.utils.mod(t,this.children.length),this.children[this.currentChild].toggleHighlight(!0)):this.voiceControlUnknown()}voiceControlNext(){this.mode===i.MODAL?this.voiceControlUnknown():this.voiceControlGoto(this.currentChild+1)}voiceControlPrevious(){this.mode===i.MODAL?this.voiceControlUnknown():this.voiceControlGoto(this.currentChild-1)}};C=__decorate([(0,n.x)({selector:".widget-modal"}),__metadata("design:paramtypes",[s.A,a.A,h.A,v.A,d.A,u.A])],C);const g=C},35999:(t,o,e)=>{e.d(o,{A:()=>l});var i=e(65360),n=e(27291),r=e(16126),s=e(81160),__decorate=function(t,o,e,i){var n,r=arguments.length,s=r<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,e,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(o,e,s):n(o,e))||s);return r>3&&s&&Object.defineProperty(o,e,s),s},__metadata=function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)};let c=class InteractionService{constructor(){this.interactionSubject=new n.B,this.interactions$=this.interactionSubject.asObservable()}getInteractions(t){return this.interactions$.pipe((0,r.p)((o=>o instanceof t)),(0,s.T)((t=>t)))}emit(t){console.debug("Interaction sent",t),this.interactionSubject.next(t)}};c=__decorate([(0,i.k)({global:!0}),__metadata("design:paramtypes",[])],c);const l=c},75015:(t,o,e)=>{e.d(o,{HB:()=>VideoReadyInteraction,Hc:()=>VideoEndInteraction,Pm:()=>TabClickedInteraction,SB:()=>VideoPlayingInteraction,Ym:()=>VideoPauseInteraction,fy:()=>AudioPauseInteraction,gY:()=>VideoMaximizedInteraction,nz:()=>ActivityResetInteraction,pK:()=>AudioPlayInteraction,ro:()=>AudioStopInteraction,s9:()=>VideoMinimizedInteraction,sV:()=>ActivityCheckInteraction,uX:()=>VideoPlayInteraction,yz:()=>ActivityFinishedInteraction});class Interaction{constructor(t){this._widgetId=t.id,this._widgetType=t.type,this._widgetDescription=t.description}get id(){return this._widgetId}get type(){return this._widgetType}get description(){return this._widgetDescription}}class ActivityResetInteraction extends Interaction{}class ActivityCheckInteraction extends Interaction{constructor(t){super(t),this._score=t.score}get score(){return this._score}}class ActivityFinishedInteraction extends Interaction{}class TabClickedInteraction extends Interaction{constructor(t){super(t),this._tab=t.tab}get tab(){return this._tab}}class AudioPlayInteraction extends Interaction{}class AudioPauseInteraction extends Interaction{}class AudioStopInteraction extends Interaction{}class VideoInteraction extends Interaction{constructor(t){super(t),this._time=t.time,this._duration=t.duration}get time(){return this._time}get duration(){return this._duration}}class VideoPlayInteraction extends VideoInteraction{}class VideoPlayingInteraction extends VideoInteraction{}class VideoEndInteraction extends VideoInteraction{}class VideoPauseInteraction extends VideoInteraction{}class VideoReadyInteraction extends Interaction{}class VideoMaximizedInteraction extends Interaction{}class VideoMinimizedInteraction extends Interaction{}}}]);