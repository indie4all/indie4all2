"use strict";(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[7885,13027],{7885:(e,t,r)=>{r.d(t,{default:()=>o});var i=r(65360),s=r(13027),n=r(70583),__decorate=function(e,t,r,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(c=(n<3?s(c):n>3?s(t,r,c):s(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let c=class AuthService{constructor(e,t){this.cipherService=e,this.utils=t}decodeToken(e){let t=e,r=this.utils.base64UrlDecode(null==t?void 0:t.split(".")[1]).toString();return JSON.parse(r)}getTokenExpirationTimeMs(e){if(this.currentUser&&this.currentUser[e]){let t=this.currentUser[e],r=this.utils.base64UrlDecode(null==t?void 0:t.split(".")[1]).toString();return 1e3*JSON.parse(r).exp}return null}isAccessTokenExpired(){return this.isTokenExpired("access_token")}isRefreshTokenExpired(){return this.isTokenExpired("refresh_token")}isTokenExpired(e){const t=this.getTokenExpirationTimeMs(e);if(Number.isFinite(t)){return Math.floor((new Date).getTime())>=t}return!1}get currentUser(){return this._currentUser}set currentUser(e){this._currentUser=e}};c=__decorate([(0,i.k)({global:!0}),__metadata("design:paramtypes",[s.default,n.A])],c);const o=c},13027:(e,t,r)=>{r.d(t,{default:()=>c});var i=r(65360),s=r(70583),__decorate=function(e,t,r,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(c=(n<3?s(c):n>3?s(t,r,c):s(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let n=class CipherService{constructor(e){this.utils=e,this.encoder=new TextEncoder,this.key=this.encoder.encode("2yWfEgocFom9jbWN"),this.iv=this.encoder.encode("AODVNUASDNVVAOVF")}async encrypt(e){const t=await window.crypto.subtle.importKey("raw",this.key,"AES-CBC",!1,["encrypt"]),r=this.utils.str2ab(e),i=await window.crypto.subtle.encrypt({name:"AES-CBC",iv:this.iv},t,r);return btoa(this.utils.ab2str(i))}async decrypt(e){const t=await window.crypto.subtle.importKey("raw",this.key,"AES-CBC",!1,["decrypt"]),r=this.utils.str2ab(atob(e)),i=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:this.iv},t,r);return this.utils.ab2str(i)}};n=__decorate([(0,i.k)({global:!0}),__metadata("design:paramtypes",[s.A])],n);const c=n}}]);