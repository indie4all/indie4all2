"use strict";(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[28847],{16492:(t,e,o)=>{o.d(e,{x:()=>Widget});var n=o(7181),i=o(40561);function Widget(t){const e=n.Ay.get(i.default);return function(o){console.debug("Registering widget "+o.name+" for selector "+t.selector),e.registerWidget(t.selector,o)}}},19412:(t,e,o)=>{o.d(e,{A:()=>Element});var n=o(16126),i=o(3605);class Element{constructor(t,e,o,n){this.voiceControl=t,this.utils=e,this.i18n=o,this.alert=n,this._activityNumber=0,this._preload=!1}async init(){if(!this._widget)throw new Error("ElementHTML widget has not been set.");this.voiceControlButton&&(this.voiceControlButton.addEventListener("click",(()=>{if(this.voiceControl.currentTarget!==this.id){for(;this.voiceControl.numTargets>1;)this.voiceControl.popTarget();return this._parent&&this.voiceControl.addTarget(this._parent.id),void this.voiceControl.addTarget(this.id)}this.voiceControl.popTarget(),this.voiceControlButton&&this.toggleVoiceControlButton(!1)})),this.voiceControl.voiceControlTargetChanged.subscribe((t=>{this.id===t.old&&this.toggleVoiceControlButton(!1),this.id===t.new&&this.toggleVoiceControlButton(!0)})),this.voiceControl.voiceControlActions.pipe((0,n.p)((t=>t.target===this.id))).subscribe((t=>{console.debug(`[Element] Element with ${this.id} received voice action:`,t),t instanceof i.m6?this.voiceControlStart():t instanceof i.$q?this.voiceControlFinish():t instanceof i.DZ?this.voiceControlNext():t instanceof i.vZ?this.voiceControlPrevious():t instanceof i.Fd?this.voiceControlGoto(t.position):t instanceof i.V3?this.voiceControlBack():t instanceof i.gZ?this.voiceControlSelect():t instanceof i.CG?this.voiceControlClose():t instanceof i.sT?this.voiceControlCheck():t instanceof i.XR?this.voiceControlCurrent():t instanceof i.B$?this.voiceControlDelete():t instanceof i._R?this.voiceControlMaximize():t instanceof i.EZ?this.voiceControlMinimize():t instanceof i.$V?this.voiceControlMove(t.position):t instanceof i.ow?this.voiceControlPause():t instanceof i.OR?this.voiceControlPlay():t instanceof i.pr?this.voiceControlRepeat():t instanceof i.lR?this.voiceControlReset():t instanceof i.m6?this.voiceControlStart():t instanceof i.o3?this.voiceControlStop():t instanceof i.HU?this.voiceControlWrite(t.text):t instanceof i.kw&&this.voiceControlUnknown()})))}get description(){return this.widget.dataset.desc||""}get id(){return this.widget.id}get type(){return this.widget.dataset.type||""}get widget(){return this._widget}set widget(t){this._widget=t}get parent(){return this._parent}set parent(t){this._parent=t}get preload(){return this._preload}get voiceControlButton(){return this._voiceControlButton||(this._voiceControlButton=document.querySelector(`#speech-to-action-${this.id}`)),this._voiceControlButton}set activityNumber(t){this._activityNumber=t,this.voiceControlButton&&(this.voiceControlButton.innerHTML+=`<span class="element-number">${this.i18n.value("activity-number",{num:t})}</span>`)}toggleHighlight(t){this.widget.classList.toggle("speech-focused",t)}toggleVoiceControlButton(t){if(this.voiceControlButton){const e=this.voiceControlButton.querySelector("svg");e&&(e.classList.toggle("fa-head-side-cough",t),e.classList.toggle("fa-head-side-cough-slash",!t))}}showVoiceControlButton(){this.voiceControlButton&&this.voiceControlButton.classList.add("show")}hideVoiceControlButton(){this.voiceControlButton&&this.voiceControlButton.classList.remove("show")}voiceControlStart(){this.toggleVoiceControlButton(!0)}voiceControlFinish(){this.voiceControl.popTarget(),this.toggleVoiceControlButton(!1)}voiceControlClose(){this.voiceControlUnknown()}voiceControlCheck(){this.voiceControlUnknown()}voiceControlCurrent(){this.voiceControlUnknown()}voiceControlDelete(){this.voiceControlUnknown()}voiceControlMaximize(){this.voiceControlUnknown()}voiceControlMinimize(){this.voiceControlUnknown()}voiceControlMove(t){this.voiceControlUnknown()}voiceControlPause(){this.voiceControlUnknown()}voiceControlPlay(){this.voiceControlUnknown()}voiceControlRepeat(){this.voiceControlUnknown()}voiceControlReset(){this.voiceControlUnknown()}voiceControlStop(){this.voiceControlUnknown()}voiceControlWrite(t){this.voiceControlUnknown()}voiceControlNext(){this.voiceControlUnknown()}voiceControlPrevious(){this.voiceControlUnknown()}voiceControlGoto(t){this.voiceControlUnknown()}voiceControlBack(){this.voiceControlUnknown()}voiceControlSelect(){this.voiceControlUnknown()}voiceControlUnknown(){this.alert.danger(this.i18n.vc.value("message.error"))}}},71540:(t,e,o)=>{var n;o.d(e,{A:()=>MatchColumnsElement}),function(t){t.ARROW_LEFT="ArrowLeft",t.ARROW_UP="ArrowUp",t.ARROW_RIGHT="ArrowRight",t.ARROW_DOWN="ArrowDown",t.END="End",t.ENTER="Enter",t.ESCAPE="Escape",t.HOME="Home",t.SPACE="Space"}(n||(n={}));var i=o(19412);class MatchColumnsElement extends i.A{constructor(t,e,o,n,i){super(e,o,n,i),this.bootstrap=t,this.voiceControl=e,this.utils=o,this.i18n=n,this.alert=i,this.grabbed=null}dragItem(t){var e;const o=t.querySelector(".dropdown-menu.show");o&&(null===(e=this.dropDownModule.getInstance(o))||void 0===e||e.hide()),this.widget.querySelectorAll(".column-list").forEach((t=>{t.setAttribute("aria-dropeffect","move")})),this.grabbed&&this.grabbed.setAttribute("aria-grabbed","false"),this.grabbed=t,this.grabbed.setAttribute("aria-grabbed","true")}dropItem(t){this.grabbed&&(t.append(this.grabbed),this.grabbed.setAttribute("aria-grabbed","false"),this.grabbed.querySelector(".term-button").focus(),this.grabbed=null),this.widget.querySelectorAll(".column-list").forEach((t=>{t.setAttribute("aria-dropeffect","")}))}onKeyDownButton(t,e){const o=t.target,i=Array.from(this.widget.querySelectorAll(".column-term .btn")).map((t=>t));let r=i.indexOf(o);switch(e){case n.ARROW_LEFT:{i.forEach((t=>t.tabIndex=-1));const t=(r-1)%i.length;i[t].tabIndex=0,i[t].focus();break}case n.ARROW_RIGHT:{i.forEach((t=>t.tabIndex=-1));const t=(r+1)%i.length;i[t].tabIndex=0,i[t].focus();break}case n.ESCAPE:o.blur();break;case n.HOME:t.preventDefault(),i.forEach((t=>t.tabIndex=-1)),i[0].tabIndex=0,i[0].focus();break;case n.END:t.preventDefault(),i.forEach((t=>t.tabIndex=-1)),i[i.length-1].tabIndex=0,i[i.length-1].focus()}}async init(){await super.init(),this.dropDownModule=await this.bootstrap.loadDropdownModule();const t=Array.from(this.widget.querySelectorAll(".column-term"));this.widget.querySelector(".term-button").setAttribute("tabindex","0"),t.forEach((t=>{t.addEventListener("dragstart",(e=>{e.stopPropagation(),e.dataTransfer.setData("text/plain",t.id),e.dataTransfer.effectAllowed="move",this.dragItem(t)}))})),this.widget.querySelectorAll(".column-list").forEach((t=>{t.addEventListener("dragover",(t=>{t.target.classList.contains("column-list")&&(t.preventDefault(),t.dataTransfer.dropEffect="move")})),t.addEventListener("drop",(t=>{t.preventDefault();let e=t.dataTransfer.getData("text/plain");this.grabbed=document.getElementById(e),this.dropItem(t.target)}))})),this.widget.addEventListener("click",(t=>{t.target instanceof HTMLElement&&(t.target.classList.contains("column-link")?(t.preventDefault(),this.dropItem(document.getElementById(t.target.dataset.column))):t.target.classList.contains("term-button")?setTimeout((()=>{t.target.closest(".dropdown").querySelector(".column-link").focus()}),100):t.target.classList.contains("btn-check-answer")?this.check():t.target.classList.contains("btn-reset")&&this.reset())})),this.widget.addEventListener("keydown",(t=>{t.target instanceof HTMLElement&&t.target.closest('.btn[data-bs-toggle="dropdown"]')&&this.onKeyDownButton(t,t.code)})),this.widget.addEventListener("shown.bs.dropdown",(t=>{t.target instanceof HTMLElement&&t.target.classList.contains("term-button")&&this.dragItem(t.target.closest(".column-term"))})),this.widget.addEventListener("hidden.bs.dropdown",(t=>{if(t.target instanceof HTMLElement&&t.target.classList.contains("dropdown-menu")){t.target.closest(".column-term").setAttribute("aria-grabbed","false"),this.widget.querySelectorAll(".column-list").forEach((t=>{t.setAttribute("aria-dropeffect","")}))}}))}reset(){this.widget.querySelectorAll(".column-list").forEach((t=>{t.setAttribute("aria-dropeffect","")})),this.grabbed&&(this.grabbed.setAttribute("aria-grabbed","false"),this.grabbed=null)}voiceControlCheck(){this.check()}voiceControlGoto(t){const e=null!==this.widget.querySelector(".dropdown-menu.show")?Array.from(this.widget.querySelectorAll(".dropdown-menu.show .column-link")):Array.from(this.widget.querySelectorAll(".column-term .btn"));e[this.utils.mod(t,e.length)].focus()}voiceControlNext(){const t=null!==this.widget.querySelector(".dropdown-menu.show")?Array.from(this.widget.querySelectorAll(".dropdown-menu.show .column-link")):Array.from(this.widget.querySelectorAll(".column-term .btn")),e=t.findIndex((t=>t===document.activeElement));t[this.utils.mod(e+1,t.length)].focus()}voiceControlMove(t){var e;if(null!==this.widget.querySelector(".dropdown-menu.show"))return;const o=Array.from(this.widget.querySelectorAll(".column-term .btn")),n=Array.from(this.widget.querySelectorAll(".match-column .column-list")),i=null!==(e=o.find((t=>t===document.activeElement)))&&void 0!==e?e:o[0],r=i.closest(".column-term");n[this.utils.mod(t,n.length)].append(r),i.focus()}voiceControlPrevious(){const t=null!==this.widget.querySelector(".dropdown-menu.show")?Array.from(this.widget.querySelectorAll(".dropdown-menu.show .column-link")):Array.from(this.widget.querySelectorAll(".column-term .btn")),e=t.findIndex((t=>t===document.activeElement));t[this.utils.mod(e-1,t.length)].focus()}voiceControlSelect(){const t=null!==this.widget.querySelector(".dropdown-menu.show")?this.widget.querySelector(".column-link:focus"):this.widget.querySelector(".column-term .btn:focus");t&&t.click()}voiceControlStart(){super.voiceControlStart();Array.from(this.widget.querySelectorAll(".column-term .btn")).map((t=>t))[0].focus()}voiceControlRepeat(){const t=null!==this.widget.querySelector(".dropdown-menu.show");this.alert.info(this.i18n.vc.value("info.match-columns."+(t?"options":"terms")))}voiceControlReset(){this.reset()}}},35999:(t,e,o)=>{o.d(e,{A:()=>a});var n=o(65360),i=o(27291),r=o(16126),s=o(81160),__decorate=function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let c=class InteractionService{constructor(){this.interactionSubject=new i.B,this.interactions$=this.interactionSubject.asObservable()}getInteractions(t){return this.interactions$.pipe((0,r.p)((e=>e instanceof t)),(0,s.T)((t=>t)))}emit(t){console.debug("Interaction sent",t),this.interactionSubject.next(t)}};c=__decorate([(0,n.k)({global:!0}),__metadata("design:paramtypes",[])],c);const a=c},75015:(t,e,o)=>{o.d(e,{HB:()=>VideoReadyInteraction,Hc:()=>VideoEndInteraction,Pm:()=>TabClickedInteraction,SB:()=>VideoPlayingInteraction,Ym:()=>VideoPauseInteraction,fy:()=>AudioPauseInteraction,gY:()=>VideoMaximizedInteraction,nz:()=>ActivityResetInteraction,pK:()=>AudioPlayInteraction,ro:()=>AudioStopInteraction,s9:()=>VideoMinimizedInteraction,sV:()=>ActivityCheckInteraction,uX:()=>VideoPlayInteraction,yz:()=>ActivityFinishedInteraction});class Interaction{constructor(t){this._widgetId=t.id,this._widgetType=t.type,this._widgetDescription=t.description}get id(){return this._widgetId}get type(){return this._widgetType}get description(){return this._widgetDescription}}class ActivityResetInteraction extends Interaction{}class ActivityCheckInteraction extends Interaction{constructor(t){super(t),this._score=t.score}get score(){return this._score}}class ActivityFinishedInteraction extends Interaction{}class TabClickedInteraction extends Interaction{constructor(t){super(t),this._tab=t.tab}get tab(){return this._tab}}class AudioPlayInteraction extends Interaction{}class AudioPauseInteraction extends Interaction{}class AudioStopInteraction extends Interaction{}class VideoInteraction extends Interaction{constructor(t){super(t),this._time=t.time,this._duration=t.duration}get time(){return this._time}get duration(){return this._duration}}class VideoPlayInteraction extends VideoInteraction{}class VideoPlayingInteraction extends VideoInteraction{}class VideoEndInteraction extends VideoInteraction{}class VideoPauseInteraction extends VideoInteraction{}class VideoReadyInteraction extends Interaction{}class VideoMaximizedInteraction extends Interaction{}class VideoMinimizedInteraction extends Interaction{}}}]);