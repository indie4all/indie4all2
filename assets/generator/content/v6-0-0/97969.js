"use strict";(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[97969],{97969:(t,e,i)=>{i.r(e),i.d(e,{default:()=>m});var r=i(16492),n=i(75015),s=i(7979),o=i(85631),a=i(35999),c=i(70583),d=i(61709),l=i(45935),h=i.n(l),u=i(38610),p=i(16126),f=i(50667),g=i(83034),__decorate=function(t,e,i,r){var n,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,i,o):n(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let y=class DragDropEvaluationElement extends o.A{constructor(t,e,i,r,n,s,o){super(t,e,i,r,o),this.i18n=t,this.utils=e,this.bootstrap=i,this.voiceControl=r,this.interaction=n,this.evaluation=s,this.alert=o}reset(){const t=this.widget.querySelector("tbody");t.innerHTML="",this.pairings.forEach(((e,i)=>{t.innerHTML+=h()({term:e.term,definition:e.definition,id:this.widget.id,position:i})}))}check(){const t=Array.from(this.widget.querySelectorAll(".drop-choice")).map(((t,e)=>{const i=t.querySelector(".drag-term"),r=this.pairings[e].definition;if(!i)return{term:"",definition:r};const n=i.dataset.position;return{term:this.pairings[n].term,definition:r}}));this.evaluation.check(this.id,t).subscribe({next:t=>{this.interaction.emit(new n.yz({id:this.id,type:this.type,description:this.description}));this.widget.querySelector(".btn-check-answer").disabled=!0,this.widget.querySelector(".text-result").innerHTML=this.i18n.value("common.sent")},error:t=>{this.widget.querySelector(".text-result").innerHTML=this.i18n.value("evaluation.no-answer")}})}async init(){await super.init(),this.evaluation.attempts.pipe((0,p.p)((t=>t.widgetId===this.id))).subscribe({next:t=>{this.widget.querySelector(".btn-check-answer").disabled=!0,this.widget.querySelector(".text-result").innerHTML=this.i18n.value("common.sent")}}),this.evaluation.get(this.id).subscribe({next:t=>{const e=t.terms,i=t.definitions;this.pairings=e.map(((t,e)=>({term:t,definition:i[e]})));const r=this.widget.querySelector("tbody");this.pairings.forEach(((t,e)=>{r.innerHTML+=h()({term:t.term,definition:t.definition,id:this.widget.id,position:e})})),this.rows=Array.from(r.querySelectorAll("tr"))},error:t=>{this.widget.querySelector(".text-result").innerHTML=this.i18n.value("TextNoData")}}),console.debug("[DragDrop] Evaluation Initialized")}};y=__decorate([(0,r.x)({selector:".widget-drag-drop"}),__metadata("design:paramtypes",[g.A,c.A,s.A,d.A,a.A,u.A,f.A])],y);const m=y}}]);