"use strict";(self.webpackChunkCDN=self.webpackChunkCDN||[]).push([[90273],{16492:(t,e,o)=>{o.d(e,{x:()=>Widget});var i=o(7181),n=o(40561);function Widget(t){const e=i.Ay.get(n.default);return function(o){console.debug("Registering widget "+o.name+" for selector "+t.selector),e.registerWidget(t.selector,o)}}},19412:(t,e,o)=>{o.d(e,{A:()=>Element});var i=o(16126),n=o(3605);class Element{constructor(t,e,o,i){this.voiceControl=t,this.utils=e,this.i18n=o,this.alert=i,this._activityNumber=0,this._preload=!1}async init(){if(!this._widget)throw new Error("ElementHTML widget has not been set.");this.voiceControlButton&&(this.voiceControlButton.addEventListener("click",(()=>{if(this.voiceControl.currentTarget!==this.id){for(;this.voiceControl.numTargets>1;)this.voiceControl.popTarget();return this._parent&&this.voiceControl.addTarget(this._parent.id),void this.voiceControl.addTarget(this.id)}this.voiceControl.popTarget(),this.voiceControlButton&&this.toggleVoiceControlButton(!1)})),this.voiceControl.voiceControlTargetChanged.subscribe((t=>{this.id===t.old&&this.toggleVoiceControlButton(!1),this.id===t.new&&this.toggleVoiceControlButton(!0)})),this.voiceControl.voiceControlActions.pipe((0,i.p)((t=>t.target===this.id))).subscribe((t=>{console.debug(`[Element] Element with ${this.id} received voice action:`,t),t instanceof n.m6?this.voiceControlStart():t instanceof n.$q?this.voiceControlFinish():t instanceof n.DZ?this.voiceControlNext():t instanceof n.vZ?this.voiceControlPrevious():t instanceof n.Fd?this.voiceControlGoto(t.position):t instanceof n.V3?this.voiceControlBack():t instanceof n.gZ?this.voiceControlSelect():t instanceof n.CG?this.voiceControlClose():t instanceof n.sT?this.voiceControlCheck():t instanceof n.XR?this.voiceControlCurrent():t instanceof n.B$?this.voiceControlDelete():t instanceof n._R?this.voiceControlMaximize():t instanceof n.EZ?this.voiceControlMinimize():t instanceof n.$V?this.voiceControlMove(t.position):t instanceof n.ow?this.voiceControlPause():t instanceof n.OR?this.voiceControlPlay():t instanceof n.pr?this.voiceControlRepeat():t instanceof n.lR?this.voiceControlReset():t instanceof n.m6?this.voiceControlStart():t instanceof n.o3?this.voiceControlStop():t instanceof n.HU?this.voiceControlWrite(t.text):t instanceof n.kw&&this.voiceControlUnknown()})))}get description(){return this.widget.dataset.desc||""}get id(){return this.widget.id}get type(){return this.widget.dataset.type||""}get widget(){return this._widget}set widget(t){this._widget=t}get parent(){return this._parent}set parent(t){this._parent=t}get preload(){return this._preload}get voiceControlButton(){return this._voiceControlButton||(this._voiceControlButton=document.querySelector(`#speech-to-action-${this.id}`)),this._voiceControlButton}set activityNumber(t){this._activityNumber=t,this.voiceControlButton&&(this.voiceControlButton.innerHTML+=`<span class="element-number">${this.i18n.value("activity-number",{num:t})}</span>`)}toggleHighlight(t){this.widget.classList.toggle("speech-focused",t)}toggleVoiceControlButton(t){if(this.voiceControlButton){const e=this.voiceControlButton.querySelector("svg");e&&(e.classList.toggle("fa-head-side-cough",t),e.classList.toggle("fa-head-side-cough-slash",!t))}}showVoiceControlButton(){this.voiceControlButton&&this.voiceControlButton.classList.add("show")}hideVoiceControlButton(){this.voiceControlButton&&this.voiceControlButton.classList.remove("show")}voiceControlStart(){this.toggleVoiceControlButton(!0)}voiceControlFinish(){this.voiceControl.popTarget(),this.toggleVoiceControlButton(!1)}voiceControlClose(){this.voiceControlUnknown()}voiceControlCheck(){this.voiceControlUnknown()}voiceControlCurrent(){this.voiceControlUnknown()}voiceControlDelete(){this.voiceControlUnknown()}voiceControlMaximize(){this.voiceControlUnknown()}voiceControlMinimize(){this.voiceControlUnknown()}voiceControlMove(t){this.voiceControlUnknown()}voiceControlPause(){this.voiceControlUnknown()}voiceControlPlay(){this.voiceControlUnknown()}voiceControlRepeat(){this.voiceControlUnknown()}voiceControlReset(){this.voiceControlUnknown()}voiceControlStop(){this.voiceControlUnknown()}voiceControlWrite(t){this.voiceControlUnknown()}voiceControlNext(){this.voiceControlUnknown()}voiceControlPrevious(){this.voiceControlUnknown()}voiceControlGoto(t){this.voiceControlUnknown()}voiceControlBack(){this.voiceControlUnknown()}voiceControlSelect(){this.voiceControlUnknown()}voiceControlUnknown(){this.alert.danger(this.i18n.vc.value("message.error"))}}},60679:(t,e,o)=>{o.d(e,{A:()=>QuestionElement});var i=o(19412);class QuestionElement extends i.A{constructor(t,e,o,i){super(t,e,o,i),this.voiceControl=t,this.utils=e,this.i18n=o,this.alert=i}async init(){await super.init(),this.options=Array.from(this.widget.querySelectorAll("input")),this.question=this.widget.querySelector(".question"),this.widget.addEventListener("click",(t=>{t.target instanceof HTMLElement&&(t.target.classList.contains("btn-reset")?this.reset():t.target.classList.contains("btn-check-answer")&&this.check())}))}voiceControlCheck(){this.check()}voiceControlGoto(t){this.options[this.utils.mod(t,this.options.length)].focus()}voiceControlNext(){const t=this.options.findIndex((t=>t===document.activeElement));t===this.options.length-1?this.options[0].focus():this.options[t+1].focus()}voiceControlPrevious(){const t=this.options.findIndex((t=>t===document.activeElement));0===t?this.options[this.options.length-1].focus():this.options[t-1].focus()}voiceControlRepeat(){this.alert.info(this.i18n.vc.value("info.containertest"))}voiceControlReset(){this.reset()}voiceControlSelect(){var t;(null!==(t=this.options.find((t=>t===document.activeElement)))&&void 0!==t?t:this.options[0]).click()}voiceControlStart(){super.voiceControlStart(),this.voiceControlGoto(0)}}},90273:(t,e,o)=>{o.r(e),o.d(e,{default:()=>v});var i=o(16492),n=o(75015),s=o(35999),c=o(60679),r=o(61709),l=o(70583),a=o(48483),h=o(50667),d=o(83034),__decorate=function(t,e,o,i){var n,s=arguments.length,c=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(c=(s<3?n(c):s>3?n(e,o,c):n(e,o))||c);return s>3&&c&&Object.defineProperty(e,o,c),c},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let u=class QuestionOpenElement extends c.A{constructor(t,e,o,i,n,s){super(o,i,t,s),this.i18n=t,this.interaction=e,this.voiceControl=o,this.utils=i,this.contentService=n,this.alert=s}onChange(){this.question.querySelectorAll(".iconresult").forEach((t=>{t.removeAttribute("aria-label"),t.innerHTML=""})),this.widget.querySelectorAll(".feedback-positive, .feedback-negative").forEach((t=>t.classList.add("hidden")))}check(){let t=0;const e=Array.from(this.question.querySelectorAll("input")),o=e.filter(((t,e)=>t.checked==this.solutions[e]));t=this.question.classList.contains("multiple")?o.length/e.length:o.length===e.length?1:0,this.interaction.emit(new n.sV({id:this.id,type:this.type,description:this.description,score:t})),1===t&&this.interaction.emit(new n.yz({id:this.id,type:this.type,description:this.description})),this.showFeedback(t)}reset(){this.interaction.emit(new n.nz({id:this.id,type:this.type,description:this.description})),this.widget.querySelectorAll(".feedback-positive, .feedback-negative").forEach((t=>t.classList.add("hidden"))),this.widget.querySelector(".text-result").innerHTML="",Array.from(this.widget.querySelectorAll("input:checked")).forEach((t=>t.checked=!1)),this.widget.querySelectorAll(".iconresult").forEach((t=>{t.removeAttribute("aria-label"),t.innerHTML=""}))}showFeedback(t){var e,o;const i=1===t,n=this.question.classList.contains("multiple"),s=Array.from(this.question.querySelectorAll("input")),c=s.filter(((t,e)=>t.checked==this.solutions[e])),r=s.filter((t=>t.checked));r.forEach((t=>{const e=c.includes(t),o=t.closest(".option").querySelector(".iconresult");o.setAttribute("aria-label",e?this.i18n.value("common.correct"):this.i18n.value("common.incorrect")),o.innerHTML=e?'<i class="fas fa-check"></i>':'<i class="fas fa-times"></i>'})),null===(e=this.question.querySelector(".feedback-negative:not(:empty)"))||void 0===e||e.classList.toggle("hidden",0===r.length||i),null===(o=this.question.querySelector(".feedback-positive:not(:empty)"))||void 0===o||o.classList.toggle("hidden",0===r.length||!i),this.widget.querySelector(".text-result").innerHTML=this.i18n.value("common.num-correct",{num:n?c.length:i?1:0})}async init(){await super.init(),this.solutions=await this.contentService.get(this.id),this.options.forEach((t=>t.addEventListener("change",(()=>this.onChange())))),console.debug("[Question] Initialized")}};u=__decorate([(0,i.x)({selector:".widget-test-question"}),__metadata("design:paramtypes",[d.A,s.A,r.A,l.A,a.A,h.A])],u);const v=u},48483:(t,e,o)=>{o.d(e,{A:()=>c});var i=o(65360),n=o(70583),__decorate=function(t,e,o,i){var n,s=arguments.length,c=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(c=(s<3?n(c):s>3?n(e,o,c):n(e,o))||c);return s>3&&c&&Object.defineProperty(e,o,c),c},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let s=class ContentService{constructor(t){this.utils=t,this.loading=!1}async get(t){for(;this.loading;)await this.utils.sleep(100);if(this.content||(this.loading=!0,this.content=await fetch("./content.json").then((t=>t.json())),this.loading=!1),!this.content[t])throw new Error(`Widget ${t} not found`);return JSON.parse(this.utils.b64DecodeUnicode(this.content[t]))}};s=__decorate([(0,i.k)({global:!0}),__metadata("design:paramtypes",[n.A])],s);const c=s},35999:(t,e,o)=>{o.d(e,{A:()=>l});var i=o(65360),n=o(27291),s=o(16126),c=o(81160),__decorate=function(t,e,o,i){var n,s=arguments.length,c=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(c=(s<3?n(c):s>3?n(e,o,c):n(e,o))||c);return s>3&&c&&Object.defineProperty(e,o,c),c},__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let r=class InteractionService{constructor(){this.interactionSubject=new n.B,this.interactions$=this.interactionSubject.asObservable()}getInteractions(t){return this.interactions$.pipe((0,s.p)((e=>e instanceof t)),(0,c.T)((t=>t)))}emit(t){console.debug("Interaction sent",t),this.interactionSubject.next(t)}};r=__decorate([(0,i.k)({global:!0}),__metadata("design:paramtypes",[])],r);const l=r},75015:(t,e,o)=>{o.d(e,{HB:()=>VideoReadyInteraction,Hc:()=>VideoEndInteraction,Pm:()=>TabClickedInteraction,SB:()=>VideoPlayingInteraction,Ym:()=>VideoPauseInteraction,fy:()=>AudioPauseInteraction,gY:()=>VideoMaximizedInteraction,nz:()=>ActivityResetInteraction,pK:()=>AudioPlayInteraction,ro:()=>AudioStopInteraction,s9:()=>VideoMinimizedInteraction,sV:()=>ActivityCheckInteraction,uX:()=>VideoPlayInteraction,yz:()=>ActivityFinishedInteraction});class Interaction{constructor(t){this._widgetId=t.id,this._widgetType=t.type,this._widgetDescription=t.description}get id(){return this._widgetId}get type(){return this._widgetType}get description(){return this._widgetDescription}}class ActivityResetInteraction extends Interaction{}class ActivityCheckInteraction extends Interaction{constructor(t){super(t),this._score=t.score}get score(){return this._score}}class ActivityFinishedInteraction extends Interaction{}class TabClickedInteraction extends Interaction{constructor(t){super(t),this._tab=t.tab}get tab(){return this._tab}}class AudioPlayInteraction extends Interaction{}class AudioPauseInteraction extends Interaction{}class AudioStopInteraction extends Interaction{}class VideoInteraction extends Interaction{constructor(t){super(t),this._time=t.time,this._duration=t.duration}get time(){return this._time}get duration(){return this._duration}}class VideoPlayInteraction extends VideoInteraction{}class VideoPlayingInteraction extends VideoInteraction{}class VideoEndInteraction extends VideoInteraction{}class VideoPauseInteraction extends VideoInteraction{}class VideoReadyInteraction extends Interaction{}class VideoMaximizedInteraction extends Interaction{}class VideoMinimizedInteraction extends Interaction{}}}]);